UNSET(LIB_LIST)
UNSET(LIB_PROJ_LIST)
SUBDIRLIST(LIB_LIST ${SOURCE_PATH})
FOREACH(ITER ${LIB_LIST})
	UNSET(LIB_FILE_LIST)
	UNSET(LIB_FILE_PATHS)
	LIST(APPEND LIB_FILE_PATHS ${SOURCE_PATH}/${ITER})
	SEARCH_FILES(LIB_FILE_LIST ${ITER} LIB_FILE_PATHS)
	ADD_LIBRARY(${ITER}_static STATIC ${LIB_FILE_LIST})
	LIST(APPEND LIB_PROJ_LIST ${ITER}_static)
	TARGET_COMPILE_DEFINITIONS(${ITER}_static PRIVATE BUILD_STATIC_LIB)
	SET_TARGET_PROPERTIES(${ITER}_static PROPERTIES FOLDER "Static")
	ADD_PRECOMPILED_HEADER(${ITER}_static LIB_FILE_LIST "stdafx")
ENDFOREACH()

UNSET(TEST_LIST)
SUBDIRLIST(TEST_LIST ${TEST_PATH})
FOREACH(ITER ${TEST_LIST})
	UNSET(TEST_FILE_PATH)
	LIST(APPEND TEST_FILE_PATH ${TEST_PATH}/${ITER})
	SEARCH_FILES(TEST_FILE_LIST ${ITER} TEST_FILE_PATH)
	ADD_EXECUTABLE(${ITER}_static ${TEST_FILE_LIST})
	TARGET_COMPILE_DEFINITIONS(${ITER}_static PRIVATE BUILD_STATIC_LIB)
	TARGET_LINK_LIBRARIES(${ITER}_static ${LIB_PROJ_LIST})
	IF(NOT MSVC)
		TARGET_LINK_LIBRARIES(${ITER}_static pthread)
	ENDIF()
	SET_TARGET_PROPERTIES(${ITER}_static PROPERTIES FOLDER "Static/Test")
	ADD_PRECOMPILED_HEADER(${ITER}_static TEST_FILE_LIST "stdafx")
ENDFOREACH()
